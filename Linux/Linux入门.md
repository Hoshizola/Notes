# Linux入门

## 一、常用命令的基本使用

- `ls`

  查看当前文件夹下的内容

- `pwd`

  查看当前所在文件夹

- `cd [目录名]`

  切换文件夹

- `touch [文件名]`

  如果文件不存在，新建文件

- `mkdir [目录名]`

  创建目录

- `rm [文件名]`

  删除指定的文件名

- `clear`

  清屏

## 二、查阅命令帮助信息

- `command --help`

  显示`command`命令的帮助信息

- `man command`

  查阅`command`命令的使用手册

  使用`man`时的操作键

  | 操作键   | 功能                 |
  | -------- | -------------------- |
  | 空格键   | 显示手册页的下一屏   |
  | Enter 键 | 一次滚动手册页的一行 |
  | b        | 回滚一屏             |
  | f        | 前滚一屏             |
  | q        | 退出                 |

## 三、文件和目录常用命令

### 01. 查看目录内容

#### 1.1 ls命令说明

- `ls` 是英文单词 **list** 的简写，其功能为列出目录的内容，是用户最常用的命令之一，类似于 **DOS** 下的 `dir` 命令

#### 1.2 ls常用选项

| 参数 | 含义                                         |
| :--- | :------------------------------------------- |
| -a   | 显示指定目录下所有子目录与文件，包括隐藏文件 |
| -l   | 以列表方式显示文件的详细信息                 |
| -h   | 配合 -l 以人性化的方式显示文件大小           |

### 02. 切换目录

#### 2.1 cd

- `cd` 是英文单词 **change directory** 的简写，其功能为更改当前的工作目录，也是用户最常用的命令之一
- 注意：*Linux所有的**目录**和**文件名**都是大小写敏感的*

| 命令  | 含义                                   |
| :---- | :------------------------------------- |
| cd    | 切换到当前用户的主目录(/home/用户目录) |
| cd ~  | 切换到当前用户的主目录(/home/用户目录) |
| cd .  | 保持在当前目录不变                     |
| cd .. | 切换到上级目录                         |
| cd -  | 可以在最近两次工作目录之间来回切换     |

### 03. 创建和删除

#### 3.1 touch

- 创建文件或修改文件时间
  - 如果文件不存在，可以创建一个空白文件
  - 如果文件已经存在，可以修改文件的最后修改日期

#### 3.2 mkdir

- 创建一个新的目录
- 新建目录的名称不能与当前目录中已有的目录或文件同名

| 选项 | 含义             |
| :--- | :--------------- |
| -p   | 可以递归创建目录 |

#### 3.3 rm

- 删除文件或目录
- 使用`rm`目录要谨慎，文件删除后不能恢复

| 选项 | 含义                                                 |
| ---- | ---------------------------------------------------- |
| -f   | 强制删除，忽略不存在的文件，无需提示                 |
| -r   | 递归地删除目录下的内容，**删除文件夹**必须使用此参数 |

### 04. 拷贝和移动文件

#### 4.1 tree

- `tree`命令可以以树状图列出文件目录结构

| 选项 | 含义       |
| ---- | ---------- |
| -d   | 只显示目录 |

#### 4.2 cp

- `cp`命令的功能是将给出的**文件**或**目录**复制到另一个**文件**或目录中，相当于DOS下的`copy`命令

| 选项 | 含义                                                         |
| :--- | :----------------------------------------------------------- |
| -i   | 覆盖文件前提示                                               |
| -r   | 若给出的源文件是目录文件，则 cp 将递归复制该目录下的所有子目录和文件，目标文件必须为一个目录名 |

#### 4.3 mv

- `mv` 命令可以用来 **移动** **文件** 或 **目录**，也可以给 **文件或目录重命名**

| 选项 | 含义           |
| :--- | :------------- |
| -i   | 覆盖文件前提示 |

### 05. 查看文件内容

#### 5.1 cat

- `cat` 命令可以用来 **查看文件内容**、**创建文件**、**文件合并**、**追加文件内容** 等功能
- `cat` 会一次显示所有的内容，适合 **查看内容较少** 的文本文件

| 选项 | 含义               |
| :--- | :----------------- |
| -b   | 对非空输出行编号   |
| -n   | 对输出的所有行编号 |

> Linux 中还有一个 `nl` 的命令和 `cat -b` 的效果等价

#### 5.2 more

- `more` 命令可以用于分屏显示文件内容，每次只显示一页内容
- 适合于 **查看内容较多**的文本文件

| 操作键   | 功能                 |
| :------- | :------------------- |
| 空格键   | 显示手册页的下一屏   |
| Enter 键 | 一次滚动手册页的一行 |
| b        | 回滚一屏             |
| f        | 前滚一屏             |
| q        | 退出                 |
| /word    | 搜索 **word** 字符串 |

#### 5.3 grep

- Linux 系统中 `grep` 命令是一种强大的文本搜索工具
- `grep`允许对文本文件进行 **模式**查找，所谓模式查找，又被称为正则表达式

| 选项 | 含义                                     |
| :--- | :--------------------------------------- |
| -n   | 显示匹配行及行号                         |
| -v   | 显示不包含匹配文本的所有行（相当于求反） |
| -i   | 忽略大小写                               |

### 06. 其他

#### 6.1 echo 文字内容

- `echo` 会在终端中显示参数指定的文字，通常会和 **重定向** 联合使用

#### 6.2 重定向 `>` 和 `>>`

- Linux 允许将命令执行结果 **重定向**到一个 **文件**
- 将本应显示在**终端上的内容** **输出／追加** 到**指定文件中**

其中

- `>` 表示输出，会覆盖文件原有的内容
- `>>` 表示追加，会将内容追加到已有文件的末尾

#### 6.3 管道 |

- Linux 允许将 **一个命令的输出** 可以**通过管道** 做为 **另一个命令的输入**
- 可以理解现实生活中的管子，管子的一头塞东西进去，另一头取出来，这里 `|` 的左右分为两端，左端塞东西（写），右端取东西（读）

常用的管道命令有：

- `more`：分屏显示内容
- `grep`：在命令执行结果的基础上查询指定的文本

## 四、用户权限相关命令

### 01. **用户** 和 **权限** 的基本概念

#### 1.1 基本概念

- **用户** 是 Linux 系统工作中重要的一环，用户管理包括 **用户** 与 **组** 管理
- 在 Linux 系统中，不论是由本机或是远程登录系统，每个系统都**必须拥有一个账号**，并且**对于不同的系统资源拥有不同的使用权限**
- 在 Linux 中，可以指定 **每一个用户** 针对 **不同的文件或者目录** 的 **不同权限**
- 对 **文件／目录** 的权限包括：

| 序号 | 权限 |  英文  | 缩写 | 数字代号 |
| :--: | :--: | :----: | :--: | :------: |
|  01  |  读  |  read  |  r   |    4     |
|  02  |  写  | write  |  w   |    2     |
|  03  | 执行 | excute |  x   |    1     |

#### 1.2 组

- 为了方便用户管理，提出了 **组** 的概念

- 在实际应用中，可以预先针对 **组** 设置好权限，然后 **将不同的用户添加到对应的组中**，从而**不用依次为每一个用户设置权限**

#### 1.3 ls -l 扩展

- `ls -l` 可以查看文件夹下文件的详细信息，从左到右依次是：
  - **权限**，第 1 个字符如果是 `d` 表示目录
  - **硬链接数**，通俗地讲，就是有多少种方式，可以访问到当前目录／文件
  - **拥有者**，家目录下 文件／目录 的拥有者通常都是当前用户
  - **组**，在 Linux 中，很多时候，会出现组名和用户名相同的情况，后续会讲
  - **大小**
  - **时间**
  - **名称**

![image-20210615104713908](C:\Users\nobod\AppData\Roaming\Typora\typora-user-images\image-20210615104713908.png)

#### 1.4 chmod简单使用

- `chmod` 可以修改 **用户／组** 对 **文件／目录** 的权限
- 命令格式如下：

```shell
chmod +/-rwx 文件名|目录名
```

#### 1.5 超级用户

- Linux 系统中的 `root` 账号通常 **用于系统的维护和管理**，对操作系统的所有资源 **具有所有访问权限**
- 在大多数版本的 Linux 中，都不推荐 **直接使用 root 账号登录系统**
- 在 Linux 安装的过程中，系统会自动创建一个用户账号，而这个默认的用户就称为“标准用户”

#### sudo

- `su` 是 `substitute user` 的缩写，表示 **使用另一个用户的身份**
- `sudo` 命令用来以其他身份来执行命令，预设的身份为 `root`
- 用户使用 `sudo` 时，必须先输入密码，之后有 **5 分钟的有效期限**，超过期限则必须重新输入密码

### 02. **组管理** 终端命令

> 提示：**创建组** / **删除组** 的终端命令都需要通过 `sudo` 执行

| 序号 | 命令                      | 作用                      |
| :--- | :------------------------ | :------------------------ |
| 01   | groupadd 组名             | 添加组                    |
| 02   | groupdel 组名             | 删除组                    |
| 03   | cat /etc/group            | 确认组信息                |
| 04   | chgrp -R 组名 文件/目录名 | 递归修改文件/目录的所属组 |

> 提示：
>
> - 组信息保存在 `/etc/group` 文件中
> - `/etc` 目录是专门用来保存 **系统配置信息** 的目录

### 03. 用户管理

> 创建用户、删除用户、修改其他用户密码的终端命令都需要通过`sudo`执行

#### 3.1 创建用户、设置密码、删除用户

| 命令                           | 作用         | 说明                                                         |
| ------------------------------ | ------------ | ------------------------------------------------------------ |
| useradd -m -g 组 新建用户名    | 添加新用户   | -m 自动建立用户家目录<br />-g 指定用户所在的组，否则会建立一个和同名的组 |
| passwd 用户名                  | 设置用户密码 | 如果是普通用户，直接用 passwd 可以修改自己的账户密码         |
| userdel -r 用户名              | 删除用户     | -r 自动删除用户家目录                                        |
| cat /etc/passwd \| grep 用户名 | 确认用户信息 | 新建用户后，用户信息会保存在 /etc/passwd 文件中              |

> 创建用户时，默认会创建一个和**用户名**同名的**组名**

#### 3.2 查看用户信息

| 命令        | 作用                       |
| ----------- | -------------------------- |
| id [用户名] | 查看用户 UID 和 GID 信息   |
| who         | 查看当前所有登录的用户列表 |
| whoami      | 查看当前登录用户的账户名   |

##### passwd 文件

`/etc/passwd` 文件存放的是用户的信息，由 6 个分号组成的 7 个信息，分别是

1. 用户名
2. 密码（x，表示加密的密码）
3. UID（用户标识）
4. GID（组标识）
5. 用户全名或本地帐号
6. 家目录
7. 登录使用的 Shell，就是登录之后，使用的终端命令，`ubuntu` 默认是 `dash`

##### usermod

- `usermod` 可以用来设置 **用户** 的 **主组** ／ **附加组** 和 **登录 Shell**，命令格式如下：
- **主组**：通常在新建用户时指定，在 `etc/passwd` 的第 4 列 **GID 对应的组**
- **附加组**：在 `etc/group` 中最后一列表示该组的用户列表，用于指定 **用户的附加权限**

> 提示：设置了用户的附加组之后，需要重新登录才能生效！

```bash
# 修改用户的主组（passwd 中的 GID）
usermod -g 组 用户名

# 修改用户的附加组
usermod -G 组 用户名

# 修改用户登录 Shell
usermod -s /bin/bash 用户名
```

> 注意：默认使用 `useradd` 添加的用户是没有权限使用 `sudo` 以 `root` 身份执行命令的，可以使用以下命令，将用户添加到 `sudo` 附加组中

```bash
usermod -G sudo 用户名
```

##### which

> 提示
>
> - `/etc/passwd` 是用于保存用户信息的文件
> - `/usr/bin/passwd` 是用于修改用户密码的程序

- `which` 命令可以查看执行命令所在位置，例如：

```bash
which ls

# 输出
# /bin/ls

which useradd

# 输出
# /usr/sbin/useradd
```

#### 3.3 切换用户

| 序号 | 命令        | 作用                   | 说明                                     |
| :--- | :---------- | :--------------------- | :--------------------------------------- |
| 01   | su - 用户名 | 切换用户，并且切换目录 | - 可以切换到用户家目录，否则保持位置不变 |
| 02   | exit        | 退出当前登录账户       |                                          |

- `su` 不接用户名，可以切换到 `root`，但是不推荐使用，因为不安全

### 04. 修改文件权限

| 命令  | 作用       |
| ----- | ---------- |
| chown | 修改拥有者 |
| chgrp | 修改组     |
| chmod | 修改权限   |

- 命令格式如下：

```bash
# 修改文件|目录的拥有者
chown 用户名 文件名|目录名

# 递归修改文件|目录的组
chgrp -R 组名 文件名|目录名

# 递归修改文件权限
chmod -R 755 文件名|目录名
```

- `chmod` 在设置权限时，可以简单地使用三个数字分别对应 **拥有者** ／ **组** 和 **其他** 用户的权限

| r      | w      | x      |
| ------ | ------ | ------ |
| 4(100) | 2(010) | 1(001) |

```bash
# 直接修改文件|目录的 读|写|执行 权限，但是不能精确到 拥有者|组|其他
chmod +/-rwx 文件名|目录名
```

## 五、系统信息相关命令

### 01. 时间和日期

| 序号 | 命令 | 作用                                             |
| :--- | :--- | :----------------------------------------------- |
| 01   | date | 查看系统时间                                     |
| 02   | cal  | `calendar` 查看日历，`-y` 选项可以查看一年的日历 |

### 02. 磁盘信息

| 序号 | 命令           | 作用                              |
| :--- | :------------- | :-------------------------------- |
| 01   | df -h          | `disk free` 显示磁盘剩余空间      |
| 02   | du -h [目录名] | `disk usage` 显示目录下的文件大小 |

- 选项说明

| 参数 | 含义                       |
| :--- | :------------------------- |
| -h   | 以人性化的方式显示文件大小 |

### 03. 进程信息

- 所谓 **进程**，通俗地说就是 **当前正在执行的一个程序**

| 序号 | 命令               | 作用                                  |
| :--- | :----------------- | :------------------------------------ |
| 01   | ps aux             | `process status` 查看进程的详细状况   |
| 02   | top                | 动态显示运行中的进程并且排序          |
| 03   | kill [-9] 进程代号 | 终止指定代号的进程，`-9` 表示强行终止 |

> `ps` 默认只会显示当前用户通过终端启动的应用程序

- `ps` 选项说明功能

| 选项 | 含义                                     |
| :--- | :--------------------------------------- |
| a    | 显示终端上的所有进程，包括其他用户的进程 |
| u    | 显示进程的详细状态                       |
| x    | 显示没有控制终端的进程                   |

> 提示：使用 `kill` 命令时，最好只终止由当前用户开启的进程，而不要终止 `root` 身份开启的进程，否则可能导致系统崩溃
>
> - 要退出 `top` 可以直接输入 `q`

## 六、其他命令

### 01. 查找文件

- `find` 命令功能非常强大，通常用来在 **特定的目录下** **搜索** 符合条件的文件

| 序号 | 命令                      | 作用                                             |
| :--- | :------------------------ | :----------------------------------------------- |
| 01   | find [路径] -name "*.txt" | 查找指定路径下扩展名是 `.txt` 的文件，包括子目录 |

- 如果省略路径，表示在当前文件夹下查找
- 在使用 `find` 命令时同时可用通配符

### 02. 打包压缩

- **打包压缩** 是日常工作中备份文件的一种方式
- 在不同操作系统中，常用的打包压缩方式是不同的
  - `Windows` 常用 `rar`
  - `Mac` 常用 `zip`
  - `Linux` 常用 `tar.gz`

#### 2.1 打包 ／ 解包

- `tar` 是 Linux 中最常用的 **备份**工具，此命令可以 **把一系列文件** 打包到 **一个大文件中**，也可以把一个 **打包的大文件恢复成一系列文件**
- `tar` 的命令格式如下：

```bash
# 打包文件
tar -cvf 打包文件.tar 被打包的文件／路径...

# 解包文件
tar -xvf 打包文件.tar
```

- `tar` 选项说明

| 选项 | 含义                                                         |
| :--- | :----------------------------------------------------------- |
| c    | 生成档案文件，创建打包文件                                   |
| x    | 解开档案文件                                                 |
| v    | 列出归档解档的详细过程，显示进度                             |
| f    | 指定档案文件名称，f 后面一定是 .tar 文件，所以必须放选项最后 |

> 注意：`f` 选项必须放在最后，其他选项顺序可以随意

#### 2.2 压缩／解压缩

##### 1) `gzip`

- `tar`与`gzip`命令结合可以使用实现文件打包和压缩
  - `tar` 只负责打包文件，但不压缩
  - 用 `gzip` 压缩 `tar` 打包后的文件，其扩展名一般用 `xxx.tar.gz`

> 在 `Linux` 中，最常见的压缩文件格式就是 `xxx.tar.gz`

- 在 `tar` 命令中有一个选项 **-z** 可以调用 `gzip`，从而可以方便的实现压缩和解压缩的功能
- 命令格式如下：

```bash
# 压缩文件
tar -zcvf 打包文件.tar.gz 被压缩的文件／路径...

# 解压缩文件
tar -zxvf 打包文件.tar.gz

# 解压缩到指定路径
tar -zxvf 打包文件.tar.gz -C 目标路径
```

| 选项 | 含义                                           |
| :--- | :--------------------------------------------- |
| -C   | 解压缩到指定目录，注意：要解压缩的目录必须存在 |

##### 2) `bzip2(two)`

- `tar` 与 `bzip2` 命令结合可以使用实现文件 **打包和压缩**（用法和 `gzip` 一样）
  - `tar` 只负责打包文件，但不压缩，
  - 用 `bzip2` 压缩 `tar` 打包后的文件，其扩展名一般用 `xxx.tar.bz2`
- 在 `tar` 命令中有一个选项 **-j** 可以调用 `bzip2`，从而可以方便的实现压缩和解压缩的功能
- 命令格式如下：

```bash
# 压缩文件
tar -jcvf 打包文件.tar.bz2 被压缩的文件／路径...

# 解压缩文件
tar -jxvf 打包文件.tar.bz2
```

### 04. 软件安装

#### 4.1 通过 apt 安装／卸载软件

- apt 是 `Advanced Packaging Tool`，是 Linux 下的一款安装包管理工具
- 可以在终端中方便的 **安装**／**卸载**／**更新软件包**

```bash
# 1. 安装软件
$ sudo apt install 软件包

# 2. 卸载软件
$ sudo apt remove 软件名

# 3. 更新已安装的包
$ sudo apt upgrade 
```

### 